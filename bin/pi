#!/bin/bash -e

. $HOME/dotfiles/bin/dffunc

declare user=noyuno
declare gittarget=/var/git
declare gituser=git
declare domain=noyuno.space
declare domain2=noyuno.mydns.jp
declare mail=noyuno@$domain
declare pdata=/var/postgresql/data
declare showterm=/var/www/showterm
declare usage=

. $HOME/dotfiles/raspberry-pi/general.sh
. $HOME/dotfiles/raspberry-pi/network.sh
. $HOME/dotfiles/raspberry-pi/gitbucket.sh
. $HOME/dotfiles/raspberry-pi/kanboard.sh
. $HOME/dotfiles/raspberry-pi/localnet.sh
. $HOME/dotfiles/raspberry-pi/netdata.sh
. $HOME/dotfiles/raspberry-pi/nginx.sh
. $HOME/dotfiles/raspberry-pi/anime.sh
. $HOME/dotfiles/raspberry-pi/showterm.sh
. $HOME/dotfiles/raspberry-pi/vuls.sh
. $HOME/dotfiles/raspberry-pi/nodejs.sh
. $HOME/dotfiles/raspberry-pi/python.sh
. $HOME/dotfiles/raspberry-pi/jma.sh
. $HOME/dotfiles/raspberry-pi/systemd.sh
. $HOME/dotfiles/raspberry-pi/mail.sh
. $HOME/dotfiles/raspberry-pi/slack.sh
. $HOME/dotfiles/raspberry-pi/display.sh
. $HOME/dotfiles/raspberry-pi/disk.sh
. $HOME/dotfiles/raspberry-pi/owncloud.sh
. $HOME/dotfiles/raspberry-pi/backup.sh

help()
{
    cat << EOF
pi: Raspberry Pi tools
$usage
EOF
    exit 1
}

if [ "$(lsb_release -is)" != "Raspbian" ]; then
    echo "this command is Raspbian only" 1>&2
    exit 1
fi

if [ $# -eq 0 ]; then
    help
fi

if [ "$1" = "install" ]; then
    ainstall
    motd
    timezone
    network
    ssl
    nginx
    psql
    gitbucket_psql
    kanboard_psql
    gitbucket
    gitbucket_nginx
    kanboard
    kanboard_nginx
    netdata
    netdata_conf
    netdata_nginx
    zeroconf
    pychromecast
    ddns
    anime
    showterm
    showterm_conf
    showterm_nginx
    cve
    vuls
else
    eval $*
fi

