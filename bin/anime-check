#!/bin/bash -e

list="$HOME/dotfiles/list/anime-keyword"
matched=

if [ "$1" ]; then
    query="[$1]"
else
    month=$(date +%m | sed 's/^0//')
    case "$month" in
        1|2|3) jam="冬" ;;
        4|5|6) jam="春" ;;
        7|8|9) jam="夏" ;;
        10|11|12) jam="秋" ;;
    esac
    query="[$(date +%Y)$jam]"
fi

for i in $(cat "$list"); do
    if [ "$query" = "$i" ]; then
        matched=1
        continue
    fi
    if [ "$matched" ]; then
        if [[ "$i" =~ ^\[.*\]$ ]]; then
            break
        fi
        anime -as "$i" && :
        if [ $? -ne 0 ]; then
            echo -e "\e[33m[ not ] $i\e[m"
        fi
    fi
done

