#!/bin/bash -e

. $HOME/dotfiles/bin/dffunc

ipackage()
{
    $HOME/dotfiles/arch/bin/yp gui tex java vmware steam
}

ilightdm () {
    dfx sudo cp -r $HOME/dotfiles/etc/lightdm /etc
}

ifont()
{
    # Noto Sans
    if [ -d "$HOME/.local/share/fonts/NSCJKaR" ]; then
        dfout2 "Noto Sans CJK JP Kai fonts have already installed"
    else
        dfx mkdir -p "$HOME/.local/share/fonts/"
        dfx cd "$DFTMP"
        dfx curl -sLO 'https://ja.osdn.net/downloads/users/9/9930/NSCJKaR.tar.xz'
        dfx tar Jxf NSCJKaR.tar.xz -C "$HOME/.local/share/fonts/"
    fi
}

imozc() {
    cp -af $HOME/dotfiles/arch/pkgbuild/mozc $DFTMP
    pushd $DFTMP/mozc
        makepkg --noconfirm -is
    popd
}

help()
{
    (
    cat << EOF
dfguiinstall [commands...]
Install GUI packages.
Install all packages by default.

commands:
    font
    lightdm
    mate
    mozc
    package
EOF
    ) >&2
    exit 1
}

run()
{
    dfout2 "dfguiinstall: $*"
    eval $*
}

if [ $# -eq 0 ] ;then
    run ipackage
    #run ifont
    run ilightdm
    run imozc
elif [ "$1" = help ]; then
    help
else
    while [ $# -gt 0 ]; do
        run "i$1"
        shift
    done
fi

