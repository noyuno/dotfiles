#!/bin/bash -e

. $HOME/dotfiles/bin/dffunc

if [ $# -eq 0 ] ; then
    echo "require argument" >&2
    exit 1
fi

if [ ! "$AURHELPER" ]; then
    echo "\$AURHELPER is not set" >&2
    exit 1
fi

i()
{
    name=$1
    . $HOME/dotfiles/arch/list/packages
    dfx $AURHELPER -S --noconfirm --needed $(eval echo '${'$name'[@]}')
}

p()
{
    name=$1
    . $HOME/dotfiles/arch/list/packages
    dfx sudo pip3 install $(eval echo '${'$name'[@]}')
}

while [ $# -gt 0 ]; do
    case $1 in
        pip3) p $1 ;;
        *)    i $1 ;;
    esac
    shift
done

